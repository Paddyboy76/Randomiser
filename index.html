<!DOCTYPE html>
<html>
<head>
    <title>Random Name Picker</title>
    <meta charset="UTF-8">
    <style>
        /* Your styles here */
    </style>
</head>
<body>
    <h1>Random Name Picker</h1>
    <div id="wheelContainer">
        <div id="wheel"></div>
    </div>
    <button id="pickButton">Pick a Random Name</button>

    <script>
        const wheel = document.getElementById('wheel');
        const pickButton = document.getElementById('pickButton');

        let names = [];

        async function loadNamesFromCSV() {
            try {
                const response = await fetch('names.csv');
                const csvData = await response.text();
                names = csvData.split('\n').map(name => name.trim()).filter(name => name !== '');
                populateWheel();
            } catch (error) {
                console.error('Error loading names:', error);
            }
        }

        function populateWheel() {
            wheel.innerHTML = names.map(name => `<div class="name">${name}</div>`).join('');
        }

        let spinning = false;

        function spinWheel() {
            if (!spinning && names.length > 0) {
                spinning = true;

                const randomDegree = Math.random() * 360 + 720; // Spin between 2 to 3 full rotations
                const randomNameIndex = Math.floor(Math.random() * names.length);

                const selectedName = names[randomNameIndex];
                const offset = 90 - randomNameIndex * (360 / names.length);

                wheel.style.transform = `rotate(${offset}deg)`;
                const nameElements = document.querySelectorAll('.name');
                nameElements.forEach((element, index) => {
                    if (index !== randomNameIndex) {
                        element.style.opacity = 0;
                    }
                });

                setTimeout(() => {
                    wheel.style.transition = 'transform 5s cubic-bezier(0.25, 1, 0.25, 1)';
                    wheel.style.transform = `rotate(${randomDegree}deg)`;
                }, 10);

                setTimeout(() => {
                    nameElements[randomNameIndex].style.opacity = 1;
                    spinning = false;
                }, 5100); // Wait for 5 seconds before displaying the result
            }
        }

        pickButton.addEventListener('click', spinWheel);
        loadNamesFromCSV();
    </script>
</body>
</html>
